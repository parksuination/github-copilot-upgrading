## GitHub Copilot으로 레거시 프로젝트 업그레이드하기

레거시(구식) Python 애플리케이션을 최신 버전의 Python으로 업그레이드하는 과정을 GitHub Copilot의 도움을 받아 단계별로 안내합니다.

> [!NOTE]
> 이 저장소는 **GitHub Copilot**의 다양한 기능(예: **Copilot Chat** 및 **인라인 채팅**)을 소개하기 위한 것입니다. 아래 단계 가이드에는 필요한 작업에 대한 일반적인 설명이 포함되어 있으며, Copilot Chat 또는 인라인 채팅을 통해 필요한 명령을 생성할 수 있습니다.
>
> 각 단계(해당되는 경우)에는 Copilot 제안이 올바른 명령과 일치하는지 확인할 수 있는 `Cheatsheet`도 포함되어 있습니다.
>
> 💡 다양한 프롬프트를 활용해 Copilot의 정확도가 어떻게 달라지는지 실험해보세요. 예를 들어, 인라인 채팅을 사용할 때 추가 프롬프트를 통해 전체 프롬프트를 다시 작성하지 않고도 응답을 세분화할 수 있습니다.

## 워크샵 기능

이 워크샵에서는 Python 2.5 버전을 사용한 레거시 Python 애플리케이션을 다루게 됩니다. 주요 특징은 다음과 같습니다:

1. 모든 종속성이 미리 설치되어 있지만, 레거시 애플리케이션은 구버전 Python을 사용합니다.
2. 애플리케이션은 Sqlite3와 구식 Python 문법을 사용하며, 최신 문법으로 업데이트할 수 있습니다.
3. 레거시 애플리케이션에는 기능 테스트에 활용할 수 있는 문서가 포함되어 있습니다.
4. 유닛 테스트와 기능 테스트가 모두 레거시 코드에 포함되어 있습니다.

### 1. 에이전트를 활용해 프로젝트 탐색

`@workspace` 에이전트를 사용해 프로젝트의 구조와 동작 방식을 설명받으세요.

- GitHub Copilot Chat을 열고 프롬프트 앞에 `@workspace`를 붙여 질문하세요.
- 예시: "이 프로젝트는 어떻게 종속성을 설치하나요?"

### 2. 레거시 및 포팅 문제 파악

Python 애플리케이션의 테스트를 실행해보세요. 사전 설치된 `pytest`를 사용해 결과를 확인하세요.

- 예시: "`@workspace` 이 코드를 최신 Python으로 포팅할 때 발생할 수 있는 문제는 무엇인가요?"
- 가상환경을 만들어 종속성을 설치해보세요.

> [!NOTE]
> 왜 문제가 발생할 수 있을까요? 레거시 Python에서 사용된 `distribute`는 더 이상 지원되지 않습니다. Copilot에게 다른 설치 방법을 제안받으세요.

### 3. 모든 코드를 업그레이드 디렉터리로 복사

코드를 포팅하려면 모든 코드를 `upgraded` 디렉터리로 복사해야 합니다. 이곳에서 작업을 진행하세요.

- 기능 테스트를 활용해 집중할 기능을 결정하세요.

### 4. 프로젝트 설치

가상환경을 만들고 프로젝트를 설치하세요. `python setup.py develop` 명령을 실행해 오류를 확인하세요.

- Copilot Chat에 오류를 붙여넣고 원인과 해결책을 문의하세요.
- `setup.py` 파일을 컨텍스트로 추가하세요.
- 제안된 방법으로 오류를 수정하고 설치를 완료하세요.

### 5. 테스트 실행

`pytest`를 사용해 유닛 테스트를 실행하세요. 오류 출력을 활용해 Copilot에게 도움을 요청하세요.

- Copilot의 답변을 검토하고 추가 설명을 요청하세요.
- 코드를 바로 수정하지 마세요.

> [!NOTE]
> 오류가 바로 이해되지 않거나 Python 버전 문제를 나타낼 수 있습니다. Copilot에게 추가 질문을 하세요.

### 6. try/except 오류 수정

기능 테스트를 활용해 집중할 기능을 정하세요. 이번 단계에서는 try/except 오류를 수정합니다.

- Copilot에게 실제 수정 방법을 요청하세요. 레거시 Python 버전을 언급하세요.
- 모든 try/except 오류를 수정하고 테스트를 반복 실행하세요.

> [!NOTE]
> 예외 외에도 다른 오류가 있을 수 있습니다. 모든 try/except를 우선적으로 수정하세요.

### 7. ConfigParser 문제 해결

다음 단계는 `ConfigParser`가 없다는 문제를 해결하는 것입니다. Copilot에게 해결 전략을 요청하세요.

- 예시: "이 프로젝트는 Python 2.5로 작성되었는데 Python 3.9에서 다음 오류가 발생합니다:"와 함께 테스트 출력을 붙여넣으세요.
- 간단한 수정일 수 있습니다. 즉시 적용하고 검증하세요.
- 테스트를 실행해 변경이 올바른지 확인하세요.

> [!NOTE]
> 모든 테스트가 통과해야 합니다. 그렇지 않으면 Copilot에게 추가 질문을 하세요.

### 8. 테스트를 Pytest로 포팅

레거시 코드는 `unittest`를 사용하지만, `pytest`로 포팅하는 것이 더 좋습니다.

- 테스트 파일에서 `@workspace` 에이전트를 사용해 포팅 방법을 문의하세요.
- 단일 테스트를 함수 기반으로 작성해보세요.
- Copilot에게 다음 테스트 생성을 요청하세요.

> [!NOTE]
> `pytest`는 `unittest` 기반 테스트도 실행할 수 있지만, 함수 기반으로 포팅하는 것이 유지보수에 더 유리합니다.

### 9. 최신 패키징 방식 적용

레거시 코드는 `distribute`와 `setuptools`를 사용합니다. 최신 방식인 `pyproject.toml`을 사용해 패키징하세요.

- Copilot에게 `pyproject.toml` 생성 방법을 문의하세요. `setup.py` 파일을 열어 컨텍스트로 활용하세요.
- 새 파일을 만들고 Copilot의 제안으로 내용을 채우세요.
- `pip install .` 명령으로 프로젝트를 설치하세요.

> [!NOTE]
> Python 패키징은 여전히 복잡한 주제입니다. Copilot의 제안을 반드시 검증하세요.

### 10. GitHub Actions로 자동화

레거시 프로젝트에는 자동화가 없습니다. GitHub Actions를 사용해 테스트와 설치를 자동화하세요.

- `@workspace` 에이전트에게 워크플로우 생성 방법을 문의하세요.
- 필요한 파일과 디렉터리를 만들어 워크플로우를 작성하세요.
- 변경사항을 푸시해 GitHub Actions가 동작하는지 확인하세요.

> [!NOTE]
> 자동화 구축은 시간이 걸릴 수 있습니다. Copilot의 도움을 받아 점진적으로 완성하세요.
